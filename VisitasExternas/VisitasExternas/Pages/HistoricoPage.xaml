<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="VisitasExternas.Pages.HistoricoPage"
             Title="HistÃ³rico de Visitas">

    <CollectionView ItemsSource="{Binding Visitas}"
                    Margin="10">
        <CollectionView.ItemTemplate>
            <DataTemplate>
                <Frame Padding="15" Margin="5" CornerRadius="10" BorderColor="LightGray">
                    <VerticalStackLayout Spacing="5">
                        <Label FontSize="18" FontAttributes="Bold">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Cliente: "/>
                                    <Span Text="{Binding NomeCliente}"/>
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                        <Label FontSize="14">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Data: "/>
                                    <Span Text="{Binding DataVisita, StringFormat='{0:dd/MM/yyyy HH:mm}'}"/>
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                        <Label FontSize="12" TextColor="Gray">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Coords: "/>
                                    <Span Text="{Binding Latitude}"/>
                                    <Span Text=", "/>
                                    <Span Text="{Binding Longitude}"/>
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                    </VerticalStackLayout>
                </Frame>
            </DataTemplate>
        </CollectionView.ItemTemplate>

        <CollectionView.EmptyView>
            <StackLayout Padding="20" VerticalOptions="Center">
                <Label Text="Nenhuma visita registrada ainda."
                       HorizontalOptions="Center"
                       FontSize="18"
                       TextColor="Gray"/>
            </StackLayout>
        </CollectionView.EmptyView>
    </CollectionView>

</ContentPage>